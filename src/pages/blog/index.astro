---
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogCard from '../../components/BlogCard.astro';

// Placeholder data - will be replaced with Sanity queries
const posts = [
  {
    title: "Building Products That Matter",
    excerpt: "Lessons learned from shipping products to real users. The gap between building something and building something people actually want.",
    slug: "building-products-that-matter",
    date: "2026-01-15",
    category: "Entrepreneurship",
    readingTime: "5 min read",
    image: "https://images.unsplash.com/photo-1553484771-371a605b060b?w=800&h=450&fit=crop",
  },
  {
    title: "The Art of Saying No",
    excerpt: "Why focus is your greatest asset as a founder, and how to protect it ruthlessly while still being helpful to others.",
    slug: "the-art-of-saying-no",
    date: "2026-01-08",
    category: "Productivity",
    readingTime: "4 min read",
    image: "https://images.unsplash.com/photo-1484480974693-6ca0a78fb36b?w=800&h=450&fit=crop",
  },
  {
    title: "From Zero to Launch",
    excerpt: "A detailed breakdown of taking an idea from conception to a fully launched product in 30 days.",
    slug: "from-zero-to-launch",
    date: "2025-12-20",
    category: "Building",
    readingTime: "8 min read",
    image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=450&fit=crop",
  },
  {
    title: "Why I Write in Public",
    excerpt: "The unexpected benefits of sharing your thoughts, learnings, and failures publicly.",
    slug: "why-i-write-in-public",
    date: "2025-12-10",
    category: "Writing",
    readingTime: "3 min read",
    image: "https://images.unsplash.com/photo-1455390582262-044cdead277a?w=800&h=450&fit=crop",
  },
  {
    title: "The Tools I Use Every Day",
    excerpt: "A comprehensive breakdown of the software, hardware, and systems that power my work.",
    slug: "tools-i-use",
    date: "2025-11-28",
    category: "Productivity",
    readingTime: "6 min read",
    image: "https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?w=800&h=450&fit=crop",
  },
  {
    title: "Lessons from My First Failed Startup",
    excerpt: "What I learned from building something nobody wanted, and how it made me a better founder.",
    slug: "lessons-from-failure",
    date: "2025-11-15",
    category: "Entrepreneurship",
    readingTime: "7 min read",
    image: "https://images.unsplash.com/photo-1493836512294-502baa1986e2?w=800&h=450&fit=crop",
  },
];

// Extract unique categories
const categories = ['All', ...new Set(posts.map(post => post.category))];
---

<BaseLayout
  title="Blog"
  description="Thoughts on building products, entrepreneurship, and the journey of turning ideas into reality."
>
  <section class="section pt-32 md:pt-40">
    <div class="container">
      <!-- Header -->
      <div class="max-w-2xl mb-12">
        <h1 class="text-4xl md:text-5xl font-heading font-bold mb-6">
          Blog
        </h1>
        <p class="text-xl text-text-muted leading-relaxed">
          Thoughts on building products, entrepreneurship, and the journey
          of turning ideas into reality. I write to learn and share what I discover.
        </p>
      </div>

      <!-- Category Filter -->
      <div class="flex flex-wrap gap-2 mb-12">
        {categories.map((category, index) => (
          <button
            class:list={[
              'px-4 py-2 rounded-full text-sm font-medium transition-all',
              index === 0
                ? 'bg-primary text-white'
                : 'bg-surface border border-border text-text-muted hover:text-text hover:border-primary'
            ]}
            data-category={category}
          >
            {category}
          </button>
        ))}
      </div>

      <!-- Search (optional - for future enhancement) -->
      <div class="mb-12">
        <div class="relative max-w-md">
          <input
            type="search"
            placeholder="Search posts..."
            class="w-full px-4 py-3 pl-12 rounded-lg bg-surface border border-border text-text placeholder:text-text-muted focus:outline-none focus:border-primary transition-colors"
          />
          <svg
            class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
        </div>
      </div>

      <!-- Posts Grid -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="posts-grid">
        {posts.map((post) => (
          <BlogCard {...post} />
        ))}
      </div>

      <!-- Load More (placeholder for pagination) -->
      <div class="mt-12 text-center">
        <button class="btn btn-secondary">
          Load more posts
        </button>
      </div>

      <!-- Newsletter CTA -->
      <div class="mt-20 gradient-border p-8 md:p-12 text-center">
        <h2 class="text-2xl md:text-3xl font-heading font-bold mb-4">
          Stay Updated
        </h2>
        <p class="text-text-muted max-w-xl mx-auto mb-6">
          Get new posts delivered to your inbox. No spam, unsubscribe anytime.
        </p>
        <form class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
          <input
            type="email"
            placeholder="your@email.com"
            class="flex-grow px-4 py-3 rounded-lg bg-surface border border-border text-text placeholder:text-text-muted focus:outline-none focus:border-primary transition-colors"
            required
          />
          <button type="submit" class="btn btn-primary whitespace-nowrap">
            Subscribe
          </button>
        </form>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Simple category filter (client-side for now)
  const categoryButtons = document.querySelectorAll('[data-category]');
  const postsGrid = document.getElementById('posts-grid');

  categoryButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Update active state
      categoryButtons.forEach(btn => {
        btn.classList.remove('bg-primary', 'text-white');
        btn.classList.add('bg-surface', 'text-text-muted');
      });
      button.classList.remove('bg-surface', 'text-text-muted');
      button.classList.add('bg-primary', 'text-white');

      // Filter posts (would need data attributes on cards for full implementation)
      // For now, this is a placeholder for the filtering logic
    });
  });
</script>
