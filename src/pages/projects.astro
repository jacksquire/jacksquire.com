---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';

// Jack's actual projects
const projects = [
  {
    title: "Outrider Digital",
    summary: "SEO growth engine for startups and agencies.",
    description: "My boutique SEO agency. We specialize in organic search strategy execution and team training. White-label SEO for agencies and direct client work with a track record of 40% traffic growth, 20x increases, and real results.",
    techStack: ["SEO", "Content Strategy", "Analytics", "Link Building"],
    status: "Active" as const,
    year: 2020,
    impact: 10,
    liveUrl: "https://outriderdigital.com",
  },
  {
    title: "Super Septic",
    summary: "Contractor growth playbook for a niche market.",
    description: "Niche SEO agency exclusively for septic pumping and installation companies. Web design, local SEO, Google Ads, and LSA management. One of several niche-specific contractor marketing brands under the Outrider umbrella.",
    techStack: ["SEO", "Google Ads", "Web Design", "Local Search"],
    status: "Active" as const,
    year: 2025,
    impact: 6,
    liveUrl: "https://septicmarketing.us",
  },
  {
    title: "Stacks",
    summary: "Systems for ADHD brains, built with empathy.",
    description: "Building tools for people who think differently. Early-stage project helping misfits create productivity systems that actually work for their brains, not against them.",
    techStack: ["Product", "ADHD", "Productivity", "Systems"],
    status: "Active" as const,
    year: 2025,
    impact: 8,
    liveUrl: "https://getstacks.xyz",
  },
  {
    title: "Free ADHD Test",
    summary: "Free, fast selfâ€‘assessment for ADHD symptoms.",
    description: "A free 5-minute ADHD self-assessment tool based on DSM-5 diagnostic criteria. Built to help people understand if their symptoms align with ADHD so they can seek proper evaluation.",
    techStack: ["Mental Health", "Assessment", "DSM-5"],
    status: "Active" as const,
    year: 2024,
    impact: 7,
    liveUrl: "https://freeadhdtest.org",
  },
  {
    title: "Wifi Rockstar",
    summary: "Personal brand for the misfit builder.",
    description: "Personal brand for misfits whose brains don't fit factory settings. Content, community, and resources for building your own path when the traditional one doesn't work.",
    techStack: ["Personal Brand", "Content", "Community"],
    status: "Active" as const,
    year: 2024,
    impact: 5,
    liveUrl: "https://instagram.com/wifirockstar",
  },
  {
    title: "Diverge & Conquer",
    summary: "Life design platform for intentional paths.",
    description: "Build the life you actually want. A platform for personal development and intentional life design. Currently on pause but the mission remains: help people break from conventional paths to create something meaningful.",
    techStack: ["Life Design", "Personal Development", "Content"],
    status: "Active" as const,
    year: 2025,
    impact: 4,
    liveUrl: "https://divergeandconquer.com",
  },
];

const activeProjects = projects.filter(p => p.status === 'Active');
const pastProjects = projects.filter(p => p.status !== 'Active');

const projectsJsonLd = {
  "@context": "https://schema.org",
  "@type": "ItemList",
  "itemListElement": projects.map((project, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": project.title,
    "url": project.liveUrl,
  })),
};
---

<BaseLayout
  title="Projects"
  description="Businesses and tools Jack Squire is building - from SEO agencies to ADHD productivity tools."
>
  <section class="section pt-32 md:pt-40">
    <div class="container">
      <!-- Header -->
      <div class="max-w-2xl mb-16">
        <h1 class="text-4xl md:text-5xl font-heading font-bold mb-6">
          Projects
        </h1>
        <p class="text-xl text-text-muted leading-relaxed">
          Businesses I run, tools I'm building, and brands I'm growing. From SEO agencies generating $100M+ in client revenue to products for people whose brains work differently.
        </p>
        <div class="mt-6 flex flex-wrap items-center gap-3 text-sm text-text-muted">
          <span>Sort by:</span>
          <button class="btn btn-secondary text-xs px-3 py-1.5" data-project-sort="newest">
            Newest
          </button>
          <button class="btn btn-secondary text-xs px-3 py-1.5" data-project-sort="impact">
            Most impactful
          </button>
        </div>
      </div>

      <!-- Active Projects -->
      {activeProjects.length > 0 && (
        <div class="mb-16">
          <h2 class="text-2xl font-heading font-bold mb-8 flex items-center gap-3">
            <span class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></span>
            Currently Active
          </h2>
          <div class="grid md:grid-cols-2 gap-6" data-project-grid>
            {activeProjects.map((project) => (
              <ProjectCard {...project} />
            ))}
          </div>
        </div>
      )}

      <!-- Past Projects -->
      {pastProjects.length > 0 && (
        <div>
          <h2 class="text-2xl font-heading font-bold mb-8">
            Past Projects
          </h2>
          <div class="grid md:grid-cols-2 gap-6" data-project-grid>
            {pastProjects.map((project) => (
              <ProjectCard {...project} />
            ))}
          </div>
        </div>
      )}

      <!-- Call to Action -->
      <div class="mt-16 pt-16 border-t border-border text-center">
        <h2 class="text-2xl font-heading font-bold mb-4">
          Need SEO help or want to collaborate?
        </h2>
        <p class="text-text-muted max-w-xl mx-auto mb-8">
          If you're looking for SEO services, check out Outrider Digital. If you want to chat about building things for misfits, I'm always down to connect.
        </p>
        <div class="flex flex-wrap justify-center gap-4">
          <a href="https://outriderdigital.com" target="_blank" rel="noopener noreferrer" class="btn btn-primary">
            Visit Outrider Digital
          </a>
          <a href="mailto:hello@jacksquire.com" class="btn btn-secondary">
            Say Hello
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script type="application/ld+json">
  {JSON.stringify(projectsJsonLd)}
</script>

<script>
  const sortButtons = document.querySelectorAll('[data-project-sort]');
  const grids = document.querySelectorAll('[data-project-grid]');

  const sortGrid = (grid, mode) => {
    const cards = Array.from(grid.children);
    cards.sort((a, b) => {
      const aYear = Number(a.dataset.year || 0);
      const bYear = Number(b.dataset.year || 0);
      const aImpact = Number(a.dataset.impact || 0);
      const bImpact = Number(b.dataset.impact || 0);
      if (mode === 'impact') {
        return bImpact - aImpact || bYear - aYear;
      }
      return bYear - aYear || bImpact - aImpact;
    });
    grid.innerHTML = '';
    cards.forEach((card) => grid.appendChild(card));
  };

  sortButtons.forEach((btn) => {
    btn.addEventListener('click', () => {
      const mode = btn.dataset.projectSort;
      grids.forEach((grid) => sortGrid(grid, mode));
    });
  });
</script>
